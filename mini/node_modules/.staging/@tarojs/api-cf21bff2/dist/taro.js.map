{"version":3,"file":"taro.js","sources":["../src/utils.js","../src/polyfill.js","../src/env.js","../src/interceptor/chain.js","../src/interceptor/index.js","../src/interceptor/interceptors.js","../src/tools.js","../src/index.js"],"sourcesContent":["export function isFunction (x) {\n  return typeof x === 'function'\n}\n\nexport function isUndefined (x) {\n  return typeof x === 'undefined'\n}\n\nexport function isObject (x) {\n  return typeof x === 'object'\n}\n","import { isFunction, isUndefined, isObject } from './utils'\n\nfunction isBadObj (x) {\n  !isObject(x) || x === null\n}\n\nfunction throwTypeError (s) {\n  throw new TypeError(s)\n}\n\nif (!isFunction(Object.assign)) {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.assign = function (target) { // .length of function is 2\n    if (target == null) { // TypeError if undefined or null\n      throwTypeError('Cannot convert undefined or null to object')\n    }\n\n    const to = Object(target)\n\n    for (let index = 1; index < arguments.length; index++) {\n      const nextSource = arguments[index]\n\n      if (nextSource != null) { // Skip over if undefined or null\n        for (const nextKey in nextSource) {\n          // Avoid bugs when hasOwnProperty is shadowed\n          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n            to[nextKey] = nextSource[nextKey]\n          }\n        }\n      }\n    }\n    return to\n  }\n}\n\nif (!isFunction(Object.defineProperties)) {\n  Object.defineProperties = function (obj, properties) {\n    function convertToDescriptor (desc) {\n      function hasProperty (obj, prop) {\n        return Object.prototype.hasOwnProperty.call(obj, prop)\n      }\n\n      if (isBadObj(desc)) { throwTypeError('bad desc') }\n\n      const d = {}\n\n      if (hasProperty(desc, 'enumerable')) d.enumerable = !!desc.enumerable\n      if (hasProperty(desc, 'configurable')) { d.configurable = !!desc.configurable }\n      if (hasProperty(desc, 'value')) d.value = desc.value\n      if (hasProperty(desc, 'writable')) d.writable = !!desc.writable\n      if (hasProperty(desc, 'get')) {\n        const g = desc.get\n\n        if (!isFunction(g) && !isUndefined(g)) { throwTypeError('bad get') }\n        d.get = g\n      }\n      if (hasProperty(desc, 'set')) {\n        const s = desc.set\n        if (!isFunction(s) && !isUndefined(s)) { throwTypeError('bad set') }\n        d.set = s\n      }\n\n      if (('get' in d || 'set' in d) && ('value' in d || 'writable' in d)) { throwTypeError('identity-confused descriptor') }\n\n      return d\n    }\n\n    if (isBadObj(obj)) throwTypeError('bad obj')\n\n    properties = Object(properties)\n\n    const keys = Object.keys(properties)\n    const descs = []\n\n    for (let i = 0; i < keys.length; i++) {\n      descs.push([keys[i], convertToDescriptor(properties[keys[i]])])\n    }\n\n    for (let i = 0; i < descs.length; i++) {\n      Object.defineProperty(obj, descs[i][0], descs[i][1])\n    }\n\n    return obj\n  }\n}\n","export const ENV_TYPE = {\n  WEAPP: 'WEAPP',\n  WEB: 'WEB',\n  RN: 'RN',\n  SWAN: 'SWAN',\n  ALIPAY: 'ALIPAY',\n  TT: 'TT',\n  QQ: 'QQ',\n  JD: 'JD'\n}\n\nexport function getEnv () {\n  if (process.env.TARO_ENV === 'weapp') {\n    return ENV_TYPE.WEAPP\n  } else if (process.env.TARO_ENV === 'alipay') {\n    return ENV_TYPE.ALIPAY\n  } else if (process.env.TARO_ENV === 'swan') {\n    return ENV_TYPE.SWAN\n  } else if (process.env.TARO_ENV === 'tt') {\n    return ENV_TYPE.TT\n  } else if (process.env.TARO_ENV === 'jd') {\n    return ENV_TYPE.JD\n  } else if (process.env.TARO_ENV === 'qq') {\n    return ENV_TYPE.QQ\n  } else if (process.env.TARO_ENV === 'h5') {\n    return ENV_TYPE.WEB\n  } else if (process.env.TARO_ENV === 'rn') {\n    return ENV_TYPE.RN\n  } else {\n    return process.env.TARO_ENV || 'Unknown'\n  }\n}\n","import { isFunction } from '../utils'\n\nexport default class Chain {\n  constructor (requestParams, interceptors, index) {\n    this.index = index || 0\n    this.requestParams = requestParams\n    this.interceptors = interceptors || []\n  }\n\n  proceed (requestParams) {\n    this.requestParams = requestParams\n    if (this.index >= this.interceptors.length) {\n      throw new Error('chain 参数错误, 请勿直接修改 request.chain')\n    }\n    const nextInterceptor = this._getNextInterceptor()\n    const nextChain = this._getNextChain()\n    const p = nextInterceptor(nextChain)\n    const res = p.catch(err => Promise.reject(err))\n    if (isFunction(p.abort)) res.abort = p.abort\n    return res\n  }\n\n  _getNextInterceptor () {\n    return this.interceptors[this.index]\n  }\n\n  _getNextChain () {\n    return new Chain(this.requestParams, this.interceptors, this.index + 1)\n  }\n}\n","import Chain from './chain'\n\nexport default class Link {\n  constructor (interceptor) {\n    this.taroInterceptor = interceptor\n    this.chain = new Chain()\n  }\n\n  request (requestParams) {\n    const chain = this.chain\n    const taroInterceptor = this.taroInterceptor\n\n    chain.interceptors = chain.interceptors\n      .filter(interceptor => interceptor !== taroInterceptor)\n      .concat(taroInterceptor)\n\n    return chain.proceed({ ...requestParams })\n  }\n\n  addInterceptor (interceptor) {\n    this.chain.interceptors.push(interceptor)\n  }\n\n  cleanInterceptors () {\n    this.chain = new Chain()\n  }\n}\n","import { isFunction, isUndefined } from '../utils'\n\nexport function timeoutInterceptor (chain) {\n  const requestParams = chain.requestParams\n  let p\n  const res = new Promise((resolve, reject) => {\n    let timeout = setTimeout(() => {\n      timeout = null\n      reject(new Error('网络链接超时,请稍后再试！'))\n    }, (requestParams && requestParams.timeout) || 60000)\n\n    p = chain.proceed(requestParams)\n    p\n      .then(res => {\n        if (!timeout) return\n        clearTimeout(timeout)\n        resolve(res)\n      })\n      .catch(err => {\n        timeout && clearTimeout(timeout)\n        reject(err)\n      })\n  })\n  if (!isUndefined(p) && isFunction(p.abort)) res.abort = p.abort\n\n  return res\n}\n\nexport function logInterceptor (chain) {\n  const requestParams = chain.requestParams\n  const { method, data, url } = requestParams\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line no-console\n    console.log(`http ${method || 'GET'} --> ${url} data: `, data)\n  }\n\n  const p = chain.proceed(requestParams)\n  const res = p\n    .then(res => {\n      if (process.env.NODE_ENV !== 'production') {\n        // eslint-disable-next-line no-console\n        console.log(`http <-- ${url} result:`, res)\n      }\n      return res\n    })\n  if (isFunction(p.abort)) res.abort = p.abort\n\n  return res\n}\n","import { isObject } from './utils'\n\nexport function Behavior (options) {\n  return options\n}\n\nexport function getPreload (current) {\n  return function (key, val) {\n    current.preloadData = isObject(key)\n      ? key\n      : {\n        [key]: val\n      }\n  }\n}\n\nconst defaultDesignWidth = 750\nconst defaultDesignRatio = {\n  640: 2.34 / 2,\n  750: 1,\n  828: 1.81 / 2\n}\n\nexport function getInitPxTransform (taro) {\n  return function (config) {\n    const {\n      designWidth = defaultDesignWidth,\n      deviceRatio = defaultDesignRatio\n    } = config\n    taro.config = taro.config || {}\n    taro.config.designWidth = designWidth\n    taro.config.deviceRatio = deviceRatio\n  }\n}\n\nexport function getPxTransform (taro) {\n  return function (size) {\n    const {\n      designWidth = defaultDesignWidth,\n      deviceRatio = defaultDesignRatio\n    } = taro.config || {}\n    if (!(designWidth in deviceRatio)) {\n      throw new Error(`deviceRatio 配置中不存在 ${designWidth} 的设置！`)\n    }\n    return (parseInt(size, 10) * deviceRatio[designWidth]) + 'rpx'\n  }\n}\n","/* eslint-disable camelcase */\nimport './polyfill'\nimport { getEnv, ENV_TYPE } from './env'\nimport Link from './interceptor'\nimport * as interceptors from './interceptor/interceptors'\nimport {\n  Behavior,\n  getPreload,\n  getPxTransform,\n  getInitPxTransform\n} from './tools'\nimport {\n  Current,\n  getCurrentInstance,\n  options,\n  nextTick,\n  eventCenter,\n  Events\n} from '@tarojs/runtime'\n\nconst Taro = {\n  Behavior,\n  getEnv,\n  ENV_TYPE,\n  Link,\n  interceptors,\n  Current,\n  getCurrentInstance,\n  options,\n  nextTick,\n  eventCenter,\n  Events,\n  getInitPxTransform\n}\n\nTaro.initPxTransform = getInitPxTransform(Taro)\nTaro.preload = getPreload(Current)\nTaro.pxTransform = getPxTransform(Taro)\n\nexport default Taro\n"],"names":["isFunction","x","isUndefined","isObject","_typeof","isBadObj","throwTypeError","s","TypeError","Object","assign","target","to","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","defineProperties","obj","properties","convertToDescriptor","desc","hasProperty","prop","d","enumerable","configurable","value","writable","g","get","set","keys","descs","i","push","defineProperty","ENV_TYPE","WEAPP","WEB","RN","SWAN","ALIPAY","TT","QQ","JD","getEnv","process","env","TARO_ENV","Chain","requestParams","interceptors","_classCallCheck","Error","nextInterceptor","_getNextInterceptor","nextChain","_getNextChain","p","res","catch","err","Promise","reject","abort","Link","interceptor","taroInterceptor","chain","filter","concat","proceed","_objectSpread","timeoutInterceptor","resolve","timeout","setTimeout","then","clearTimeout","logInterceptor","method","data","url","NODE_ENV","console","log","Behavior","options","getPreload","current","key","val","preloadData","_defineProperty","defaultDesignWidth","defaultDesignRatio","getInitPxTransform","taro","config","designWidth","deviceRatio","getPxTransform","size","parseInt","Taro","Current","getCurrentInstance","nextTick","eventCenter","Events","initPxTransform","preload","pxTransform"],"mappings":"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"}
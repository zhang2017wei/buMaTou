import { temporarilyNotSupport } from '../utils';
import { MethodHandler } from '../utils/handler';
// 电量
export const getBatteryInfoSync = temporarilyNotSupport('getBatteryInfoSync');
export const getBatteryInfo = async ({ success, fail, complete } = {}) => {
    var _a;
    const handle = new MethodHandler({ name: 'getBatteryInfo', success, fail, complete });
    try {
        // @ts-ignore
        const battery = await ((_a = navigator.getBattery) === null || _a === void 0 ? void 0 : _a.call(navigator));
        return handle.success({
            isCharging: battery.charging,
            level: Number(battery.level || 0) * 100
        });
    }
    catch (error) {
        return handle.fail({
            errMsg: (error === null || error === void 0 ? void 0 : error.message) || error
        });
    }
};

{"version":3,"file":"index.js","sources":["../src/template.ts","../src/components.ts","../src/program.ts","../src/index.ts"],"sourcesContent":["import { capitalize, toCamelCase } from '@tarojs/shared'\nimport { RecursiveTemplate } from '@tarojs/shared/dist/template'\n\nexport class Template extends RecursiveTemplate {\n  exportExpr = 'export default'\n  supportXS = true\n  Adapter = {\n    if: 'a:if',\n    else: 'a:else',\n    elseif: 'a:elif',\n    for: 'a:for',\n    forItem: 'a:for-item',\n    forIndex: 'a:for-index',\n    key: 'a:key',\n    xs: 'sjs',\n    type: 'alipay'\n  }\n\n  buildXsTemplate () {\n    return '<import-sjs name=\"xs\" from=\"./utils.sjs\" />'\n  }\n\n  replacePropName (name, value, compName) {\n    if (value === 'eh') return name.replace('bind', 'on')\n    if (compName === 'map' && value.includes('polygons')) {\n      name = 'polygon'\n    }\n    return name\n  }\n\n  getEvents () {\n    return {\n      onTap: 'eh',\n      onTouchMove: 'eh',\n      onTouchEnd: 'eh',\n      onTouchCancel: 'eh',\n      onLongTap: 'eh'\n    }\n  }\n\n  buildThirdPartyAttr (attrs: Set<string>) {\n    return [...attrs].reduce((str, attr) => {\n      if (attr.startsWith('@')) {\n        return str + `on${capitalize(attr.slice(1))}=\"eh\" `\n      } else if (attr.startsWith('bind')) {\n        return str + `${attr}=\"eh\" `\n      } else if (attr.startsWith('on')) {\n        return str + `${attr}=\"eh\" `\n      }\n\n      return str + `${attr}=\"{{ i.${toCamelCase(attr)} }}\" `\n    }, '')\n  }\n\n  createMiniComponents (components): any {\n    const result = super.createMiniComponents(components)\n\n    // 兼容支付宝 2.0 构建\n    delete result.slot\n    delete result['slot-view']\n\n    return result\n  }\n\n  modifyLoopBody = (child: string, nodeName: string) => {\n    if (nodeName === 'picker-view') {\n      return `<picker-view-column>\n        <view a:for=\"{{item.cn}}\" a:key=\"sid\">\n          ${child}\n        </view>\n      </picker-view-column>`\n    }\n    return child\n  }\n\n  modifyLoopContainer = (children: string, nodeName: string) => {\n    if (nodeName === 'picker') {\n      return `\n  <view>${children}</view>\n  `\n    }\n    if (nodeName === 'swiper') {\n      return `\n    <block a:for=\"{{xs.f(i.cn)}}\" a:key=\"sid\">\n      <swiper-item class=\"{{item.cl}}\" style=\"{{item.st}}\" id=\"{{item.uid||item.sid}}\" data-sid=\"{{item.sid}}\">\n        <block a:for=\"{{item.cn}}\" a:key=\"sid\">\n          <template is=\"{{xs.e(0)}}\" data=\"{{i:item}}\" />\n        </block>\n      </swiper-item>\n    </block>\n  `\n    }\n    return children\n  }\n\n  modifyTemplateResult = (res: string, nodeName: string) => {\n    if (nodeName === 'picker-view-column' || nodeName === 'swiper-item') return ''\n    return res\n  }\n\n  modifyThirdPartyLoopBody = () => {\n    // 兼容支付宝 2.0 构建\n    return `<view a:if=\"{{item.nn==='slot'}}\" slot=\"{{item.name}}\" id=\"{{item.uid||item.sid}}\" data-sid=\"{{item.sid}}\">\n        <block a:for=\"{{item.cn}}\" a:key=\"sid\">\n          <template is=\"{{xs.e(0)}}\" data=\"{{i:item}}\" />\n        </block>\n      </view>\n      <template a:else is=\"{{xs.e(0)}}\" data=\"{{i:item}}\" />`\n  }\n\n  buildXSTmpExtra () {\n    return `f: function (l) {\n    return l.filter(function (i) {return i.nn === 'swiper-item'})\n  }`\n  }\n}\n","import { singleQuote } from '@tarojs/shared'\n\nexport const components = {\n  // ======== 调整属性 ========\n  View: {\n    'disable-scroll': 'false',\n    hidden: 'false',\n    bindAppear: '',\n    bindDisappear: '',\n    bindFirstAppear: ''\n  },\n  Text: {\n    'number-of-lines': ''\n  },\n  Map: {\n    skew: '0',\n    rotate: '0',\n    polygons: '[]',\n    'include-padding': '',\n    'ground-overlays': '',\n    'tile-overlay': '',\n    'custom-map-style': '',\n    setting: '{}',\n    optimize: '',\n    bindRegionChange: '',\n    bindPanelTap: ''\n  },\n  Button: {\n    scope: '',\n    'public-id': '',\n    bindGetAuthorize: '',\n    bindError: ''\n  },\n  Checkbox: {\n    bindChange: ''\n  },\n  Input: {\n    'random-number': 'false',\n    controlled: 'false',\n    enableNative: 'false'\n  },\n  Slider: {\n    'track-size': '4',\n    'handle-size': '22',\n    'handle-color': singleQuote('#ffffff')\n  },\n  Switch: {\n    controlled: 'false'\n  },\n  Textarea: {\n    'show-count': 'true',\n    controlled: 'false',\n    enableNative: 'false'\n  },\n  MovableView: {\n    bindChangeEnd: ''\n  },\n  ScrollView: {\n    'scroll-animation-duration': '',\n    'trap-scroll': 'false'\n  },\n  Swiper: {\n    'active-class': '',\n    'changing-class': '',\n    acceleration: 'false',\n    'disable-programmatic-animation': 'false',\n    'disable-touch': 'false',\n    bindAnimationEnd: ''\n  },\n  Image: {\n    'default-source': ''\n  },\n  Canvas: {\n    type: '',\n    width: singleQuote('300px'),\n    height: singleQuote('225px'),\n    bindReady: ''\n  },\n  Video: {\n    'poster-size': singleQuote('contain'),\n    'mobilenet-hint-type': '1',\n    enableNative: 'false',\n    bindLoading: '',\n    bindUserAction: '',\n    bindStop: '',\n    bindRenderStart: ''\n  },\n  // ======== 额外组件 ========\n  Lottie: {\n    autoplay: 'false',\n    path: '',\n    speed: '1.0',\n    repeatCount: '0',\n    autoReverse: 'false',\n    assetsPath: '',\n    placeholder: '',\n    djangoId: '',\n    md5: '',\n    optimize: 'false',\n    bindDataReady: '',\n    bindDataFailed: '',\n    bindAnimationStart: '',\n    bindAnimationEnd: '',\n    bindAnimationRepeat: '',\n    bindAnimationCancel: '',\n    bindDataLoadReady: ''\n  },\n  Lifestyle: {\n    'public-id': '',\n    memo: '',\n    bindFollow: ''\n  },\n  LifeFollow: {\n    sceneId: '',\n    checkFollow: '',\n    bindCheckFollow: '',\n    bindClose: ''\n  },\n  ContactButton: {\n    'tnt-inst-id': '',\n    scene: '',\n    size: '25',\n    color: singleQuote('#00A3FF'),\n    icon: '',\n    'alipay-card-no': '',\n    'ext-info': ''\n  }\n}\n","import { TaroPlatformBase } from '@tarojs/service'\nimport { Template } from './template'\nimport { components } from './components'\n\nconst PACKAGE_NAME = '@tarojs/plugin-platform-alipay'\n\nexport default class Alipay extends TaroPlatformBase {\n  platform = 'alipay'\n  globalObject = 'my'\n  runtimePath = `${PACKAGE_NAME}/dist/runtime`\n  taroComponentsPath = `${PACKAGE_NAME}/dist/components-react`\n  fileType = {\n    templ: '.axml',\n    style: '.acss',\n    config: '.json',\n    script: '.js',\n    xs: '.sjs'\n  }\n\n  template = new Template()\n\n  /**\n   * 1. setupTransaction - init\n   * 2. setup\n   * 3. setupTransaction - close\n   * 4. buildTransaction - init\n   * 5. build\n   * 6. buildTransaction - close\n   */\n  constructor (ctx, config) {\n    super(ctx, config)\n\n    this.setupTransaction.addWrapper({\n      close () {\n        this.modifyMiniConfigs()\n        this.modifyComponents()\n        this.modifyWebpackConfig()\n        this.generateProjectConfig('project.alipay.json', 'mini.project.json')\n      }\n    })\n  }\n\n  /**\n   * 转换用户编写的配置（微信小程序标准）为支付宝小程序标准\n   */\n  modifyMiniConfigs () {\n    this.ctx.modifyMiniConfigs(({ configMap }) => {\n      const replaceKeyMap = {\n        navigationBarTitleText: 'defaultTitle',\n        navigationBarBackgroundColor: 'titleBarColor',\n        enablePullDownRefresh: 'pullRefresh',\n        list: 'items',\n        text: 'name',\n        iconPath: 'icon',\n        selectedIconPath: 'activeIcon',\n        color: 'textColor'\n      }\n      Object.keys(configMap).forEach(key => {\n        const item = configMap[key]\n        if (item.content) {\n          this.recursiveReplaceObjectKeys(item.content, replaceKeyMap)\n        }\n      })\n    })\n  }\n\n  /**\n   * 增加组件或修改组件属性\n   */\n  modifyComponents () {\n    const { internalComponents } = this.template\n    this.template.mergeComponents(this.ctx, components)\n    this.modifySlider(internalComponents.Slider)\n    this.modifySwiper(internalComponents.Swiper)\n  }\n\n  /**\n   * 修改 Slider 组件属性\n   */\n  modifySlider (slider) {\n    delete slider['block-size']\n    delete slider['block-color']\n  }\n\n  /**\n   * 修改 Swiper 组件属性\n   */\n  modifySwiper (swiper) {\n    delete swiper.bindAnimationFinish\n  }\n\n  /**\n   * 修改 Webpack 配置\n   */\n  modifyWebpackConfig () {\n    this.ctx.modifyWebpackChain(({ chain }) => {\n      // 支付宝系小程序全局就有 navigator 对象，不需要模拟\n      chain.plugin('providerPlugin')\n        .tap(args => {\n          const newArgs = Object.assign({}, args[0])\n          delete newArgs.navigator\n          return [newArgs]\n        })\n    })\n  }\n}\n","import Alipay from './program'\nimport type { IPluginContext } from '@tarojs/service'\n\n// 让其它平台插件可以继承此平台\nexport { Alipay }\n\nlet registedModifyPageTemplate = false\nexport default (ctx: IPluginContext) => {\n  ctx.registerPlatform({\n    name: 'alipay',\n    useConfigName: 'mini',\n    async fn ({ config }) {\n      !registedModifyPageTemplate && modifyPageTemplate(ctx)\n      const program = new Alipay(ctx, config)\n      await program.start()\n    }\n  })\n}\n\nfunction getIsBuildPluginPath (filePath, isBuildPlugin) {\n  return isBuildPlugin ? `plugin/${filePath}` : filePath\n}\n\n// 支付宝小程序中，如果某个页面依赖了原生小程序组件，\n// 那么这个页面不能使用公共模板 base.axml，\n// 而需要把公共模板的内容在此页面的模板中复制一份, 。\nfunction modifyPageTemplate (ctx: IPluginContext) {\n  registedModifyPageTemplate = true\n  ctx.modifyBuildAssets(({ assets, miniPlugin }) => {\n    const pages: string[] = []\n\n    // 筛选出使用了自定义组件的页面\n    miniPlugin.pages.forEach(page => {\n      const config = miniPlugin.filesConfig[miniPlugin.getConfigFilePath(page.name)].content\n      if (!page.isNative && config?.hasOwnProperty('usingComponents') && Object.keys(config.usingComponents).length) {\n        pages.push(page.name)\n      }\n    })\n\n    if (!pages.length) return\n\n    const baseXml = assets[getIsBuildPluginPath('base.axml', miniPlugin.options.isBuildPlugin)].source()\n\n    pages.forEach(page => {\n      const templateName = `${page}.axml`\n      const assetsItem = assets[templateName]\n      const src = assetsItem._value ? assetsItem._value.toString() : assetsItem.source()\n      let relativePath\n      const templateCaller = src.replace(/<import src=\"(.*)base\\.axml\"\\/>/, function (_, $1) {\n        relativePath = $1\n        return ''\n      })\n      const main = baseXml.replace(/<import-sjs name=\"xs\" from=\"(.*)utils.sjs\" \\/>/, function () {\n        return `<import-sjs name=\"xs\" from=\"${relativePath}utils.sjs\" />`\n      })\n\n      const res = `${templateCaller}\n${main}`\n      assets[templateName] = {\n        size: () => res.length,\n        source: () => res\n      }\n    })\n    if (miniPlugin.options.isBuildPlugin) {\n      const miniProjectJSONStr = JSON.stringify({\n        miniprogramRoot: 'miniprogram',\n        pluginRoot: 'plugin',\n        compileType: 'plugin'\n      }, null, 2)\n      assets['mini.project.json'] = {\n        size: () => miniProjectJSONStr.length,\n        source: () => miniProjectJSONStr\n      }\n      const pluginJSON = JSON.parse(assets['/plugin/plugin.json'].source())\n      pluginJSON.publicPages = pluginJSON.pages\n      pluginJSON.pages = Object.values(pluginJSON.publicPages)\n      const pluginJSONStr = JSON.stringify(pluginJSON, null, 2)\n      assets['/plugin/plugin.json'] = {\n        size: () => pluginJSONStr.length,\n        source: () => pluginJSONStr\n      }\n    }\n  })\n}\n"],"names":["RecursiveTemplate","capitalize","toCamelCase","singleQuote","TaroPlatformBase"],"mappings":"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"}